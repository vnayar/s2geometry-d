
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>s2.s2edge_crossings</title>
    <style type="text/css" media="screen">
      html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p,
      blockquote, pre, a, abbr, address, cite, code, del, dfn, em, figure,
      img, ins, kbd, q, s, samp, small, strong, sub, sup, var, b, u, i, dl,
      dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption,
      tbody, tfoot, thead, tr, th, td {
        background: transparent none repeat scroll 0 0;
        border: 0 none;
        font-size: 100%;
        margin: 0;
        outline: 0 none;
        padding: 0;
        vertical-align: baseline;
      }

      h1 { font-size: 200%; }
      h2 { font-size: 160%; }
      h3 { font-size: 120%; }
      h4 { font-size: 100%; }
      h5 { font-size: 80%; }
      h6 { font-size: 80%; font-weight: normal; }

      ul, ol {
        margin: 1.4em 0;
      }
      ul ul, ol ol, ul ol, ol ul {
        margin-top: 0;
        margin-bottom: 0;
      }
      ul, ol {
        margin-left: 2.8em;
      }

      ol {
        list-style: decimal;
      }
      ol ol {
        list-style: lower-alpha;
      }
      ol ol ol {
        list-style: lower-roman;
      }
      ol ol ol ol {
        list-style: decimal;
      }

      blockquote {
        margin: 0.1em;
        margin-left: 1em;
        border-left: 2px solid #cccccc;
        padding-left: 0.7em;
      }

      .color_red { color: #dc322f; }
      .color_blue { color: #268bd2; }
      .color_green { color: #859901; }
      .color_yellow { color: #b58901; }
      .color_black { color: black; }
      .color_white { color: white; }

      .font_big {
        font-size: 1.2em;
      }

      .ddoc_section_h {
        font-weight: bold;
        font-size: 13px;
        line-height: 19.5px;
        margin-top: 11px;
        display: block;
      }

      body.dlang .dlang {
        display: inline-block;
      }

      body.dlang .declaration .dlang {
          display: block;
      }

      body.dlang .ddoc_header_anchor a.dlang {
        display: block;
        color: rgba(0, 136, 204, 1);
        text-decoration: none;
      }

      body.dlang .ddoc_header_anchor .code {
        color: rgba(0, 136, 204, 1);
      }

      #ddoc_main .module {
          border-color: currentColor rgba(233, 233, 233, 1) rgba(233, 233, 233, 1);
          border-style: none solid solid;
          border-width: 0 1px 1px;
          overflow-x: hidden;
          padding: 15px;
      }

      #ddoc_main .section .section {
        margin-top: 0;
      }

      #ddoc_main .ddoc_module_members_section {
          padding: 1px 0 0;
          transition: transform 0.3s ease 0s;
      }

      #ddoc_main .ddoc_member, #ddoc_main .ddoc_module_members section.intro {
          background: #fff none repeat scroll 0 0;
          list-style-type: none;
          width: 100%;
      }

      #ddoc_main .ddoc_header_anchor {
          font-size: 1.4em;
          transition: transform 0.3s ease 0s;
      }

      #ddoc_main .ddoc_header_anchor > .code {
          display: inline-block;

      }

      #ddoc_main .ddoc_decl {
        background-color: transparent;
        height: 100%;
        left: 0;
        top: 0;
        padding: 0;
        padding-left: 15px;
      }

      #ddoc_main .ddoc_decl .section, #ddoc_main .section.ddoc_sections {
        background: white none repeat scroll 0 0;
        margin: 0;
        padding: 5px;
        position: relative;
        border-radius: 5px;
      }

      #ddoc_main .ddoc_decl .section h4:first-of-type, #ddoc_main .section.ddoc_sections h4:first-of-type {
        font-size: 13px;
        line-height: 1.5;
        margin-top: 21px;
      }

      #ddoc_main .section .declaration {
          margin-top: 21px;
      }

      #ddoc_main .section .declaration .code {
          color: rgba(0, 0, 0, 1);
          margin-bottom: 15px;
          padding-bottom: 6px;
      }

      #ddoc_main .declaration div .para {
          margin-bottom: 0;
      }

      #ddoc_main .ddoc_params .graybox tr td:first-of-type {
        padding: 7px;
        text-align: right;
        vertical-align: top;
        word-break: normal;
        white-space: nowrap;
      }

      #ddoc_main .ddoc_params .graybox {
        border: 0 none;
      }

      #ddoc_main .ddoc_params .graybox td {
        border-color: rgba(214, 214, 214, 1);
      }

      #ddoc_main .ddoc_params .graybox tr:first-child > td {
        border-top: 0 none;
      }

      #ddoc_main .ddoc_params .graybox tr:last-child > td {
        border-bottom: 0 none;
      }

      #ddoc_main .ddoc_params .graybox tr > td:first-child {
        border-left: 0 none;
      }

      #ddoc_main .ddoc_params .graybox tr > td:last-child {
        border-right: 0 none;
        width: 100%;
      }

      #ddoc_main em.term, #ddoc_main em.term .code {
        color: rgba(65, 65, 65, 1);
        font-size: 12px;
        font-style: italic;
        line-height: 1.5;
      }

      #ddoc_main .see-also {
        cursor: pointer;
        font-family: Menlo,monospace;
      }

      #ddoc_main .ddoc_decl .section > div:last-of-type {
        margin-bottom: 15px;
      }

      #ddoc_main .ddoc_member, #ddoc_main .ddoc_module_members {
          transition: transform 0.3s ease 0s;
      }

      #ddoc_main .code_sample {
        background: inherit;
      }

      #ddoc_main .declaration .code-line {
          display: block;
          font: 1em Menlo,monospace;
      }

      #ddoc_main a[name] {
        margin: -112px 0 0;
        padding-top: 112px;
      }

      #ddoc_main .ddoc_decl td {
        max-width: inherit;
      }

      #ddoc_main .declaration a {
        color: inherit;
      }

      #ddoc_main .declaration a:hover {
          color: rgba(0, 136, 204, 1);
          text-decoration: underline;
      }

      body.ddoc {
        background-color: transparent;
        color: rgba(0, 0, 0, 1);
        font-family: Helvetica,Arial,sans-serif;
        font-size: 62.5%;
        margin: 0;
        border: 0;
        left: 0;
        top: 0;
        padding: 0;
      }

      .ddoc a[name] {
        display: block;
        height: 0;
        margin: -85px 0 0;
        padding-top: 85px;
        width: 0;
      }

      .ddoc .module {
          border-color: transparent;
          background-color: rgba(255, 255, 255, 1);
          border-color: currentColor rgba(233, 233, 233, 1) rgba(233, 233, 233, 1);
          border-image: none;
          border-style: none solid solid;
          border-width: 0 1px 1px;
          box-shadow: 0 0 1px rgba(0, 0, 0, 0.07);
          display: block;
          margin-left: 0;
          min-height: calc(100% - 173px);
          overflow: auto;
          padding-bottom: 100px;
      }

      .ddoc .content_wrapper {
          background-color: rgba(242, 242, 242, 1);
          margin: 0 auto;
          max-width: 980px;
      }

      .ddoc .section {
        padding: 15px 25px 30px;
      }

      .ddoc .section .section {
        margin: 30px 0 0;
        padding: 0;
      }

      .ddoc .para {
        color: rgba(65, 65, 65, 1);
        font-size: 1.4em;
        line-height: 145%;
        margin-bottom: 15px;
      }

      .ddoc .ddoc_examples .para {
        margin-bottom: 0;
      }

      .ddoc .module_name {
          color: rgba(0, 0, 0, 1);
          display: block;
          font-family: Helvetica;
          font-size: 2.8em;
          font-weight: 100;
          margin-bottom: 0;
          padding: 15px 0;
      }

      .ddoc .module a {
          color: rgba(0, 136, 204, 1);
          text-decoration: none;
      }

      .ddoc .code {
        color: rgba(128, 128, 128, 1);
        font-family: Menlo,monospace;
        font-size: 0.85em;
        word-wrap: break-word;
      }

      .ddoc .code i {
        font-style: normal;
      }

      .ddoc .code .code {
        font-size: 1em;
      }

      .ddoc .code_sample {
        background-clip: padding-box;
        margin: 1px 0;
        text-align: left;
      }

      .ddoc .code_sample {
        display: block;
        font-size: 1.4em;
        margin-left: 21px;
      }

      .ddoc ol .code_sample {
        font-size: 1em;
      }

      .ddoc .code_lines {
        counter-reset: li;
        line-height: 1.6em;
        list-style: outside none none;
        margin: 0;
        padding: 0;
      }

      .ddoc .code_listing .code_sample div {
        margin-left: 13px;
        width: 93%;
      }

      .ddoc .code_listing .code_sample div .code_lines li {
        list-style-type: none;
        margin: 0;
        padding-right: 10px;
      }

      .ddoc .code_sample div .code_lines li::before {
        margin-left: -33px;
        margin-right: 25px;
      }

      .ddoc .code_sample div .code_lines li:nth-child(n+10)::before {
        margin-left: -39px;
        margin-right: 25px;
      }

      .ddoc .code_sample div .code_lines li:nth-child(n+100)::before {
        margin-left: -46px;
        margin-right: 25px;
      }

      .ddoc .code_sample .code_lines .code {
        color: #000;
      }

      .ddoc div.dlang {
        margin: 10px 0 21px;
        padding: 4px 0 2px 10px;
      }

      .ddoc div.dlang {
          margin: 10px 0 21px;
          padding: 4px 0 2px 10px;
      }

      .ddoc div.dlang {
        border-left: 5px solid rgba(0, 155, 51, 0.2);
      }

      .ddoc .code_lines li::before {
        color: rgba(128, 128, 128, 1);
        content: counter(li, decimal);
        counter-increment: li;
        font-family: Menlo,monospace;
        font-size: 0.9em;
        margin-right: 16px;
      }

      .ddoc .code_lines li {
        padding-left: 0;
        white-space: pre-wrap;
      }

      .ddoc .code_lines li:only-of-type::before {
        color: rgba(255, 255, 255, 1);
        content: " ";
      }

      .ddoc .code_lines li:only-of-type {
        color: rgba(255, 255, 255, 1);
        content: " ";
      }

      .ddoc .code_lines li:nth-child(n+10) {
        text-indent: -17px;
      }

      .ddoc .code_lines li:nth-child(n+10)::before {
        margin-right: 12px;
      }

      .ddoc .graybox {
        border: 1px solid rgba(233, 233, 233, 1);
        border-collapse: collapse;
        border-spacing: 0;
        empty-cells: hide;
        margin: 20px 0 36px;
        text-align: left;
      }

      .ddoc .graybox p {
        margin: 0;
        min-width: 50px;
      }

      .ddoc th {
        margin: 0;
        max-width: 260px;
        padding: 5px 10px 5px 10px;
        vertical-align: bottom;
      }

      .ddoc td {
        border: 1px solid rgba(233, 233, 233, 1);
        margin: 0;
        max-width: 260px;
        padding: 5px 10px 5px 10px;
        vertical-align: middle;
      }

      .punctuation {
        color: rgba(0, 0, 0, 1);
      }

      .comment {
        color: rgba(0, 131, 18, 1);
      }

      .operator {
        color: #000;
      }

      .keyword {
        color: rgba(170, 13, 145, 1);
      }

      .keyword_type {
        color: rgba(170, 51, 145, 1);
      }

      .string_literal {
        color: rgba(196, 26, 22, 1);
      }

      .ddoc_psuper_symbol {
        color: rgba(92, 38, 153, 1);
      }

      .param {
        color: rgba(0, 0, 0, 1);
      }

      .psymbol {
        color: rgba(0, 0, 0, 1);
      }

      .ddoc_member_header .ddoc_header_anchor .code {
        font-size: 1em;
      }
    </style>
  </head>
  <body id="ddoc_main" class="ddoc dlang">
    <div class="content_wrapper">
      <article class="module">
        <h1 class="module_name">s2.s2edge_crossings</h1>
        <section id="module_content">
<section class="section ddoc_module_members_section">
  <div class="ddoc_module_members">
    <ul class="ddoc_members">
  <li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#crossingSign" id="crossingSign"><code class="code">crossingSign</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="crossingSign"></span>int <code class="code">crossingSign</code>(in S2Point <code class="code">a</code>, in S2Point <code class="code">b</code>, in S2Point <code class="code">c</code>, in S2Point <code class="code">d</code>);

          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    This function determines whether the edge AB intersects the edge CD.
 Returns +1 if AB crosses CD at <code class="code">a</code> point that is interior to both edges.
 Returns  0 if any two vertices from different edges are the same.
 Returns -1 otherwise.

  </p>
</div>
<div class="ddoc_description">
  <h4>Discussion</h4>
  <p class="para">
    Note that if an edge is degenerate (A == B or C == D), the return value
 is 0 if two vertices from different edges are the same and -1 otherwise.
<br><br>
 Properties of CrossingSign:
<br><br>
  (1) CrossingSign(<code class="code">b</code>,<code class="code">a</code>,<code class="code">c</code>,<code class="code">d</code>) == CrossingSign(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>)
  (2) CrossingSign(<code class="code">c</code>,<code class="code">d</code>,<code class="code">a</code>,<code class="code">b</code>) == CrossingSign(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>)
  (3) CrossingSign(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>) == 0 if <code class="code">a</code>==<code class="code">c</code>, <code class="code">a</code>==<code class="code">d</code>, <code class="code">b</code>==<code class="code">c</code>, <code class="code">b</code>==<code class="code">d</code>
  (3) CrossingSign(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>) &lt;= 0 if <code class="code">a</code>==<code class="code">b</code> or <code class="code">c</code>==<code class="code">d</code> (see above)
<br><br>
 This function implements an exact, consistent perturbation model such
 that no three points are ever considered to be collinear.  This means
 that even if you have 4 points A, B, C, D that lie exactly in <code class="code">a</code> line
 (say, around the equator), C and D will be treated as being slightly to
 one side or the other of AB.  This is done in <code class="code">a</code> way such that the
 results are always consistent (see s2pred::Sign).
<br><br>
 Note that if you want to check an edge against <code class="code">a</code> collection of other edges,
 it is much more efficient to use an S2EdgeCrosser (see s2edge_crosser.h).
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#vertexCrossing" id="vertexCrossing"><code class="code">vertexCrossing</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="vertexCrossing"></span>bool <code class="code">vertexCrossing</code>(in S2Point <code class="code">a</code>, in S2Point <code class="code">b</code>, in S2Point <code class="code">c</code>, in S2Point <code class="code">d</code>);

          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    Given two edges AB and CD where at least two vertices are identical
 (i.e. CrossingSign(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>) == 0), this function defines whether the
 two edges "cross" in <code class="code">a</code> such <code class="code">a</code> way that point-in-polygon containment tests
 can be implemented by counting the number of edge crossings.  The basic
 rule is that <code class="code">a</code> "crossing" occurs if AB is encountered after CD during <code class="code">a</code>
 CCW sweep around the shared vertex starting from <code class="code">a</code> fixed reference point.

  </p>
</div>
<div class="ddoc_description">
  <h4>Discussion</h4>
  <p class="para">
    Note that according to this rule, if AB crosses CD then in general CD
 does not cross AB.  However, this leads to the correct result when
 counting polygon edge crossings.  For example, suppose that A,B,C are
 three consecutive vertices of <code class="code">a</code> CCW polygon.  If we now consider the edge
 crossings of <code class="code">a</code> segment BP as P sweeps around B, the crossing number
 changes parity exactly when BP crosses BA or BC.
<br><br>
 Useful properties of VertexCrossing (VC):
<br><br>
  (1) VC(<code class="code">a</code>,<code class="code">a</code>,<code class="code">c</code>,<code class="code">d</code>) == VC(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">c</code>) == <code class="code">false</code>
  (2) VC(<code class="code">a</code>,<code class="code">b</code>,<code class="code">a</code>,<code class="code">b</code>) == VC(<code class="code">a</code>,<code class="code">b</code>,<code class="code">b</code>,<code class="code">a</code>) == <code class="code">true</code>
  (3) VC(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>) == VC(<code class="code">a</code>,<code class="code">b</code>,<code class="code">d</code>,<code class="code">c</code>) == VC(<code class="code">b</code>,<code class="code">a</code>,<code class="code">c</code>,<code class="code">d</code>) == VC(<code class="code">b</code>,<code class="code">a</code>,<code class="code">d</code>,<code class="code">c</code>)
  (3) If exactly one of <code class="code">a</code>,<code class="code">b</code> equals one of <code class="code">c</code>,<code class="code">d</code>, then exactly one of
      VC(<code class="code">a</code>,<code class="code">b</code>,<code class="code">c</code>,<code class="code">d</code>) and VC(<code class="code">c</code>,<code class="code">d</code>,<code class="code">a</code>,<code class="code">b</code>) is <code class="code">true</code>
<br><br>
 It is an error to call this method with 4 distinct vertices.
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#edgeOrVertexCrossing" id="edgeOrVertexCrossing"><code class="code">edgeOrVertexCrossing</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="edgeOrVertexCrossing"></span>bool <code class="code">edgeOrVertexCrossing</code>(in S2Point <code class="code">a</code>, in S2Point <code class="code">b</code>, in S2Point <code class="code">c</code>, in S2Point <code class="code">d</code>);

          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    A convenience function that calls CrossingSign() to handle cases
 where all four vertices are distinct, and VertexCrossing() to handle
 cases where two or more vertices are the same.  This defines <code class="code">a</code> crossing
 function such that point-in-polygon containment tests can be implemented
 by simply counting edge crossings.
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#getIntersection" id="getIntersection"><code class="code">getIntersection</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="getIntersection"></span>S2Point <code class="code">getIntersection</code>(in S2Point <code class="code">a0</code>, in S2Point <code class="code">a1</code>, in S2Point <code class="code">b0</code>, in S2Point <code class="code">b1</code>);

          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    Given two edges AB and CD such that CrossingSign(A, B, C, D) &gt; 0, returns
 their intersection point.  Useful properties of GetIntersection (GI):

  </p>
</div>
<div class="ddoc_description">
  <h4>Discussion</h4>
  <p class="para">
    (1) GI(b,a,c,d) == GI(a,b,d,c) == GI(a,b,c,d)
  (2) GI(c,d,a,b) == GI(a,b,c,d)
<br><br>
 The returned intersection point X is guaranteed to be very close to the
 <code class="code">true</code> intersection point of AB and CD, even if the edges intersect at a
 very small angle.  See "INTERSECTION_ERROR" below for details.
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#INTERSECTION_ERROR" id="INTERSECTION_ERROR"><code class="code">INTERSECTION_ERROR</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="INTERSECTION_ERROR"></span>immutable S1Angle <code class="code">INTERSECTION_ERROR</code>;

          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    <code class="code">INTERSECTION_ERROR</code> is an upper bound on the distance from the intersection
 point returned by GetIntersection() to the <code class="code">true</code> intersection point.
  </p>
</div>

</section>

</div>

</li><li class="ddoc_member">
  <div class="ddoc_member_header">
  <div class="ddoc_header_anchor">
  <a href="#INTERSECTION_MERGE_RADIUS" id="INTERSECTION_MERGE_RADIUS"><code class="code">INTERSECTION_MERGE_RADIUS</code></a>
</div>
</div><div class="ddoc_decl">
  <section class="section">
    <div class="declaration">
      <h4>Declaration</h4>
      <div class="dlang">
        <p class="para">
          <code class="code">
            <span class="ddoc_anchor" id="INTERSECTION_MERGE_RADIUS"></span>immutable S1Angle <code class="code">INTERSECTION_MERGE_RADIUS</code>;

          </code>
        </p>
      </div>
    </div>
  </section>
</div>
<div class="ddoc_decl">
  <section class="section ddoc_sections">
  <div class="ddoc_summary">
  <p class="para">
    This value can be used as the S2Builder snap_radius() to ensure that edges
 that have been displaced by up to INTERSECTION_ERROR are merged back
 together again.  For example this can happen when geometry is intersected
 with a set of tiles and then unioned.  It is equal to twice the
 intersection error because input edges might have been displaced in
 opposite directions.
  </p>
</div>

</section>

</div>

</li>
</ul>
  </div>
</section>
</section>
      </article>
    </div>
  </body>
</html>
